<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>

	<link rel="stylesheet" href="//taling.me/sample/vod2/Vod/css/a3_vod_detail.css?ver=200609" media="all">
	<link rel="stylesheet" href="//taling.me/sample/vod2/Vod/css/a3_vod_detail2.css?ver=200708" media="all">
	<link rel="stylesheet" href="css/editor.css" type="text/css" charset="utf-8"/>
	<link rel="stylesheet" href="css/content_view.css" type="text/css" charset="utf-8"/>
	<link rel="stylesheet" href="css/editaling.css" type="text/css" charset="utf-8"/>
    <script src="js/editor_loader.js?environment=development" type="text/javascript" charset="utf-8"></script>

</head>
<body>

<div class="te-wrap">

<div class="te-area-header">
	<h1 class="te-logo-editaling"></h1>
</div>

<!-- 에디터 시작 -->
<div class="te-area-editor">
	<!--
		@decsription
		등록하기 위한 Form으로 상황에 맞게 수정하여 사용한다. Form 이름은 에디터를 생성할 때 설정값으로 설정한다.
	-->
	<form name="tx_editor_form" id="tx_editor_form" action="/My/blogpost2.php" method="post" accept-charset="utf-8">

		<!-- 에디터 컨테이너 시작 -->
		<div id="tx_trex_container" class="tx-editor-container">
			<!-- 툴바 - 기본 시작 -->
			<div id="tx_toolbar_basic" class="te-area-menu-editor">
				<div class="te-menu-editor">
					<div id="tx_fontfamily">
						<a class="te-button-editor" href="javascript:;" title="글꼴" style="width:100px"></a>
					</div>
					<div id="tx_fontfamily_menu" class="tx-fontfamily-menu tx-menu"></div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_fontsize">
						<a class="te-button-editor" href="javascript:;" title="글자크기" style="width:50px"></a>
					</div>
					<div id="tx_fontsize_menu" class="tx-fontsize-menu tx-menu"></div>
				</div>
				<div class="te-menu-editor" id="tx_bold">
					<a class="te-button-editor" href="javascript:;" title="굵게 (Ctrl+B)">굵게</a>
				</div>
				<div class="te-menu-editor" id="tx_underline">
					<a class="te-button-editor" href="javascript:;" title="밑줄 (Ctrl+U)">밑줄</a>
				</div>
				<div class="te-menu-editor" id="tx_italic">
					<a class="te-button-editor" href="javascript:;" title="기울임 (Ctrl+I)">기울임</a>
				</div>
				<div class="te-menu-editor" id="tx_strike">
					<a class="te-button-editor" href="javascript:;" title="취소선 (Ctrl+D)">취소선</a>
				</div>
				<div class="te-menu-editor">
					<div id="tx_forecolor">
						<a class="te-blind" href="javascript:;"></a>
						<a class="te-button-editor tx-arrow" href="javascript:;" title="글자색 선택" style="margin-right:8px;">글자색</a>
					</div>
					<div id="tx_forecolor_menu" class="tx-menu tx-forecolor-menu tx-colorpallete"></div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_backcolor">
						<a class="te-blind" href="javascript:;"></a>
						<a class="te-button-editor tx-arrow" href="javascript:;" title="글자 배경색 선택" style="margin-right:8px;">글자배경색</a>
					</div>
					<div id="tx_backcolor_menu" class="tx-menu tx-backcolor-menu tx-colorpallete"></div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_alignleft">
						<a class="te-button-editor" href="javascript:;" title="왼쪽정렬 (Ctrl+,)">왼쪽정렬</a>
					</div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_aligncenter">
						<a class="te-button-editor" href="javascript:;" title="가운데정렬 (Ctrl+.)">가운데정렬</a>
					</div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_alignright">
						<a class="te-button-editor" href="javascript:;" title="오른쪽정렬 (Ctrl+/)">오른쪽정렬</a>
					</div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_alignfull">
						<a class="te-button-editor" href="javascript:;" title="양쪽정렬">양쪽정렬</a>
					</div>
				</div>
				<div class="te-menu-editor">
					<div id="tx_lineheight">
						<a class="te-button-editor" href="javascript:;"title="줄간격">줄간격</a>
					</div>
					<div id="tx_lineheight_menu" class="tx-lineheight-menu tx-menu"></div>
				</div>
				<div class="te-menu-editor" id="tx_switchertoggle">
					<a class="te-button-editor" href="javascript:;" title="에디터 타입">HTML편집</a>
				</div>
			</div>
			<!-- 툴바 - 기본 끝 -->
			<!-- 편집영역 시작 -->
			<!-- 에디터 Start -->
			<div id="tx_canvas" class="tx-canvas">
				<div id="tx_loading" class="tx-loading"><div><img src="images/icon/editor/loading2.png" width="113" height="21" align="absmiddle"></div></div>
				<div id="tx_canvas_wysiwyg_holder" class="tx-holder" style="display:block;">
					<iframe id="tx_canvas_wysiwyg" name="tx_canvas_wysiwyg" allowtransparency="true" frameborder="0"></iframe>
				</div>
				<div class="tx-source-deco">
					<div id="tx_canvas_source_holder" class="tx-holder">
						<textarea id="tx_canvas_source" rows="30" cols="30"></textarea>
					</div>
				</div>
				<div id="tx_canvas_text_holder" class="tx-holder">
					<textarea id="tx_canvas_text" rows="30" cols="30"></textarea>
				</div>
			</div>
			<!-- 높이조절 Start -->
			<div id="tx_resizer" class="tx-resize-bar">
				<div class="tx-resize-bar-bg"></div>
				<img id="tx_resize_holder" src="images/icon/editor/skin/01/btn_drag01.gif" width="58" height="12" unselectable="on" alt="" />
			</div>
			<div class="tx-side-bi" id="tx_side_bi">
				<div style="text-align: right;">
					<!--img hspace="4" height="14" width="78" align="absmiddle" src="images/icon/editor/editor_bi.png" /-->
				</div>
			</div>
			<!-- 편집영역 끝 -->
			<!-- 첨부박스 시작 -->
			<!-- 파일첨부박스 Start -->
			<div id="tx_attach_div" class="tx-attach-div">
				<div id="tx_attach_txt" class="tx-attach-txt">파일 첨부</div>
				<div id="tx_attach_box" class="tx-attach-box">
					<div class="tx-attach-box-inner">
						<div id="tx_attach_preview" class="tx-attach-preview"><p></p><img src="images/icon/editor/pn_preview.gif" width="147" height="108" unselectable="on"/></div>
						<div class="tx-attach-main">
							<div id="tx_upload_progress" class="tx-upload-progress"><div>0%</div><p>파일을 업로드하는 중입니다.</p></div>
							<ul class="tx-attach-top">
								<li id="tx_attach_delete" class="tx-attach-delete"><a>전체삭제</a></li>
								<li id="tx_attach_size" class="tx-attach-size">
									파일: <span id="tx_attach_up_size" class="tx-attach-size-up"></span>/<span id="tx_attach_max_size"></span>
								</li>
								<li id="tx_attach_tools" class="tx-attach-tools">
								</li>
							</ul>
							<ul id="tx_attach_list" class="tx-attach-list"></ul>
						</div>
					</div>
				</div>
			</div>
			<!-- 첨부박스 끝 -->
		</div>
		<!-- 에디터 컨테이너 끝 -->
	</form>
</div>
<!-- 에디터 끝 -->

<script type="text/javascript">
	var config = {
		txHost: '', /* 런타임 시 리소스들을 로딩할 때 필요한 부분으로, 경로가 변경되면 이 부분 수정이 필요. ex) http://xxx.xxx.com */
		txPath: '', /* 런타임 시 리소스들을 로딩할 때 필요한 부분으로, 경로가 변경되면 이 부분 수정이 필요. ex) /xxx/xxx/ */
		txService: 'sample', /* 수정필요없음. */
		txProject: 'sample', /* 수정필요없음. 프로젝트가 여러개일 경우만 수정한다. */
		initializedId: "", /* 대부분의 경우에 빈문자열 */
		wrapper: "tx_trex_container", /* 에디터를 둘러싸고 있는 레이어 이름(에디터 컨테이너) */
		form: 'tx_editor_form'+"", /* 등록하기 위한 Form 이름 */
		txIconPath: "images/icon/editor/", /*에디터에 사용되는 이미지 디렉터리, 필요에 따라 수정한다. */
		txDecoPath: "images/deco/contents/", /*본문에 사용되는 이미지 디렉터리, 서비스에서 사용할 때는 완성된 컨텐츠로 배포되기 위해 절대경로로 수정한다. */
		canvas: {
            exitEditor:{
                /*
                desc:'빠져 나오시려면 shift+b를 누르세요.',
                hotKey: {
                    shiftKey:true,
                    keyCode:66
                },
                nextElement: document.getElementsByTagName('button')[0]
                */
            },
			styles: {
				color: "#111", /* 기본 글자색 */
				fontFamily: "Noto Sans KR", /* 기본 글자체 */
				fontSize: "14px", /* 기본 글자크기 */
				backgroundColor: "#fff", /*기본 배경색 */
				lineHeight: "1.5", /*기본 줄간격 */
				padding: "8px" /* 위지윅 영역의 여백 */
			},
			showGuideArea: false
		},
		events: {
			preventUnload: false
		},
		sidebar: {
			attachbox: {
				show: true,
				confirmForDeleteAll: true
			}
		},
		size: {
			contentWidth: '' /* 지정된 본문영역의 넓이가 있을 경우에 설정 */
		}
	};

	EditorJSLoader.ready(function(Editor) {
		var editor = new Editor(config);
	});
	
</script>

<!-- Sample: Saving Contents -->
<script type="text/javascript">

	var template_1 = function () {
		var content = `
		<div class="con-box">
			<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
			<div class="vod-detail-event-highlight-area">
				<div class="vod-detail-event-highlight-inner">
					기간 한정! <span class="vod-detail-event-text-color">쏟아지는 혜택</span>의 기회를 놓치지 마세요!
				</div>
			</div>
		</div>
		`;
		Editor.getCanvas().pasteContent(content);
	};
	var template_2 = function () {
		var content = `
		<section class="section_contents" style="background:#f9f9f9;">
			<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
			<div class="section_row">
				<div class="col_left">
					<div class="title_navi">
						<p class="title_main">이 강의를 <br class="mobile_none">들어야 하는 <br class="mobile_none">이유</p>
					</div>
				</div><!--// col_left-->
				<div class="col_right">
					<div class="big_number_list_area">
						<div class="big_number_list">
							<span class="numbering">01</span>
							<div class="list_contents">
								<strong class="list_title">제목을 입력하세요.</strong>
								<p class="list_text">내용을 입력하세요.</p>
							</div>
							<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
						</div>
						<div class="big_number_list">
							<span class="numbering">02</span>
							<div class="list_contents">
								<strong class="list_title">제목을 입력하세요.</strong>
								<p class="list_text">내용을 입력하세요.</p>
							</div>
							<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
						</div>
						<div class="big_number_list">
							<span class="numbering">03</span>
							<div class="list_contents">
								<strong class="list_title">제목을 입력하세요.</strong>
								<p class="list_text">내용을 입력하세요.</p>
							</div>
							<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
						</div>
						<div class="big_number_list">
							<span class="numbering">04</span>
							<div class="list_contents">
								<strong class="list_title">제목을 입력하세요.</strong>
								<p class="list_text">내용을 입력하세요.</p>
							</div>
							<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>
						</div>
					</div>
				</div><!--// col_right-->
			</div><!--// section_row-->
        </section>
		`;
		Editor.getCanvas().pasteContent(content);
	};
	var saveContentTest = function () {
		var preContent = Editor.getContent(); // 콘텐츠 GET!
		var content = preContent.replaceAll('<button class="te-button-remove" onclick="this.parentElement.remove();">[[[--- 삭제 ---]]]</button>','');
		var doc = document;
		var contentViewTest = doc.getElementById('contentViewTest');
		var contentCodeViewTest = doc.getElementById('contentCodeViewTest');
		contentViewTest.innerHTML = content;
		contentCodeViewTest.innerText = content;
	};

	/* 예제용 함수 */
	function saveContent() {
		Editor.save(); // 이 함수를 호출하여 글을 등록하면 된다.
	}

	/**
	 * Editor.save()를 호출한 경우 데이터가 유효한지 검사하기 위해 부르는 콜백함수로
	 * 상황에 맞게 수정하여 사용한다.
	 * 모든 데이터가 유효할 경우에 true를 리턴한다.
	 * @function
	 * @param {Object} editor - 에디터에서 넘겨주는 editor 객체
	 * @returns {Boolean} 모든 데이터가 유효할 경우에 true
	 */
	function validForm(editor) {
		// Place your validation logic here

		// sample : validate that content exists
		var validator = new Trex.Validator();
		var content = editor.getContent();
		if (!validator.exists(content)) {
			alert('내용을 입력하세요');
			return false;
		}

		return true;
	}

	/**
	 * Editor.save()를 호출한 경우 validForm callback 이 수행된 이후
	 * 실제 form submit을 위해 form 필드를 생성, 변경하기 위해 부르는 콜백함수로
	 * 각자 상황에 맞게 적절히 응용하여 사용한다.
	 * @function
	 * @param {Object} editor - 에디터에서 넘겨주는 editor 객체
	 * @returns {Boolean} 정상적인 경우에 true
	 */
	function setForm(editor) {
        var i, input;
        var form = editor.getForm();
        var content = editor.getContent();

        // 본문 내용을 필드를 생성하여 값을 할당하는 부분
        var textarea = document.createElement('textarea');
        textarea.name = 'content';
        textarea.value = content;
        form.createField(textarea);

        /* 아래의 코드는 첨부된 데이터를 필드를 생성하여 값을 할당하는 부분으로 상황에 맞게 수정하여 사용한다.
         첨부된 데이터 중에 주어진 종류(image,file..)에 해당하는 것만 배열로 넘겨준다. */
        var images = editor.getAttachments('image');	
        for (i = 0; i < images.length; i++) {
            // existStage는 현재 본문에 존재하는지 여부
            if (images[i].existStage) {
                // data는 팝업에서 execAttach 등을 통해 넘긴 데이터
                //alert('attachment information - image[' + i + '] \r\n' + JSON.stringify(images[i].data));
                input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'attach_image[]';
                input.value = images[i].data.imageurl;  // 예에서는 이미지경로만 받아서 사용
                form.createField(input);
            }
        }

        var files = editor.getAttachments('file');
        for (i = 0; i < files.length; i++) {
            input = document.createElement('input');
            input.type = 'hidden';
            input.name = 'attach_file';
            input.value = files[i].data.attachurl;
            form.createField(input);
        }
        return true;
	}
</script>
<div class="te-area-sidebar">
	<strong class="te-title-template">브오디 부분 템플릿</strong>
	<a class="te-button-template" onclick='template_1()'>얼리버드</a>
	<a class="te-button-template" onclick='template_2()'>빅넘버리스트</a>
</div>
<a class="te-button-publish" onclick='saveContentTest()'>발행</a>
<!-- End: Saving Contents -->
<div id="contentViewTest" style="margin-top:30px;margin-right:300px;padding:8px;border:1px solid hotpink;">미리보기 테스트 영역</div>
<div id="contentCodeViewTest" style="margin-top:30px;margin-right:300px;padding:8px;border:1px solid hotpink;font-family:'Courier New',monspace;">코드 확인 영역</div>

</div>
</body>
</html>